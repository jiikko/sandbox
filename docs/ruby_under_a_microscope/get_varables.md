# Rubyのレキシカルスコープの実装

*  Rubyは変数に保存した値すべてを、YAVM命令列の引数や返り値と一緒にyarvスタック上に格納する。
  * しかし、これらの変数へのアクセスはそう単純ではない。
* 変数にあたいを保存したり、変数から値を読みだしたりスルタメニmRubyローカル変数アクセスと動的変数アクセスとおおいう2つのまったくことなる方法を元いている。

# ローカル変数アクセス
* メソッド呼び出しを行った際、Rubyは呼び出したメソッド内で宣言されたローカル変数用のスペースをyarvスタック上にいくつか追加する。
  * ローカルテーブルは、コンパイラの段階で書くメソッドに対して作成されたローカルテーブルを参照することによって、Rubyはいくつかの変数が使われているかを把握している。
* 例えば、以下のように無駄にローカル変数を使う関数を記述したたとする。

```ruby
def display
  str = "hello"
  puts str
end
```

図の左側がRubyコード、図の右側が
