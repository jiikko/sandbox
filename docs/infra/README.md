# インフラ
## 監視例
* 可用性
  * port80にアクセスできるか
  * httpプロセスは稼働しているか
  * disk はマウントしているか
* 機能性/フライト中
  * プリケーションはデータベースに問い合わせをしているか
  * OSはDNSをみているか
  * コントローラーはディスクに書き込みおしているか
  * ロードバランサーはWebサーバにリクエストを渡しているか
* 機能性/フライトシュミレーション中
  * HTTPリクエスト、DNSルクセスト、メール送信などをシュミレートする
* 品質/利用性
  * CPUやメモリの使用率を見て、マシンに十分な処理能力があるか確認する
* 品質/効率性
  * キャッシュサーバのキャッシュ率
* 品質/スループット
  * 新しい加入者数
  * ログイン数
  * ヘルプデスクのインシデント数
  * リクエストの入出力数
  * ユーザの入出力
  * データベースのリクエストのリクエストの入出力
  * アクティブな接続数・起動
  * 破棄されたインスタンス数
  * メカニカルタークの残高(キャパシティ)
* 状況
  * コンフィギュレーションの監視
    * チェックサム・パッケージ
  * セキュリティ監視
    * パッチ・ポート・侵入検知・ウィルススキャン
  *  バックアップ監視
    * プロビジョニングチェック
    * ライセンスチェック
    * バックアップ
* 信頼性
  * スパムメールの量
  * SEOの評価
  * SSL証明書の検証
  * 露骨なコンテンツがないか

## レイヤー
* ビジネス
  * イントラサイトの管理
* トランザクション
  * ログイン、ドキュメントの追加、リンクの共有、ログアウト
* サービス
  * メール、DNS,Webサーバ、データベース、ファイアウォール
* ホスト
  * サーバ、CPU,メモリ、スイッチ

## 監視ベストプラクティス
* 確認ツールは、リポジトリに入れてバージョン管理する
* 異なる環境を使って、新しい確認ツールを開発またはテストをする
* 確認ツールを通常のコードと同じようにテストうる
* すべてのコンポーネントとその依存関係を視覚的に表示する。ダッシュボードを使って失敗した監視とコンポーネントの関係をエンジニアに示せば問題のコンポーネントの特定に役立つ
* リストビュー・マップビュー・ドリルダウンビューなど簡単なナビゲーションなどのデータ表現を使い、情報過多を避ける
* ビジネスロジックを再利用できないときは書き直さない
* パラーメータをハードコーディングしないで設定ファイルを使う
* デプロイを簡単にして、新しい確認を反映しやすくする
* 監視データのバックアップとリストア方法を理解する
* 監視システムを監視する
* 高可用性の機能を使って監視を保守する
* 監視に他の機能と同じアカウントを使わない。必要最低限の権限で実行する。パスワードを平文では保存しない。四肢雨テムへのアクセスに制限をかける。他のテストのプレイグラウンドとして使わない。障害が起きたホストからのアクセスを避けるため、ファイアウォールやプロキシシステムで監視システムを守る

## FMEA
* 監視対象を決定するのに役立つだろう
* 可能性のある障害を一覧にして、検知度・発生度・深刻度にスコアをつける
* スコアをかけ合わせて並び替えれば監視するべきもっとも重要なものが見つかる

### 監視対象
正常なシステムの動作は、正常なビジネスの動作に関連していなければならない。ウェブサイトを安定させるためにアラートの数を制限することもあるが、ビジネス要求に沿っていなければ意味がない。逆もまたしかりだ。アラートをたくさん送って注意深くサイトを監視していも、ビジネスがそれを望んでなければ意味がない。このバランスを保つのが監視の旅だ。
